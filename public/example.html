<div style="background-color:rgb(255, 255, 255);color:rgb(0, 0, 0);font-family:微软雅黑;font-size:14px;font-style:normal;font-weight:normal;text-align:left;"> 
  <table border="1" cellpadding="2" cellspacing="0" style="width: 859px;"> 
   <tbody> 
    <tr> 
     <td style="width: 59px; height: 31px;">&lt;html&gt; <br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;head&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;title&gt;Demo&lt;/title&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;meta http-equiv="content-type" content="text/html;charset=utf-8"&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;script src="jquery.js?bust=1" type="text/javascript"&gt;&lt;/script&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;script type="text/javascript"&gt;&nbsp;</span><br><br>function sc(){ <br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&nbsp; &nbsp; var div = document.getElementById("console_wrapper");&nbsp;</span><br>&nbsp; &nbsp; div.scrollTop = div.scrollHeight; <br>} <br><br>var ws; <br><br>$(document).ready(function () { <br>&nbsp; &nbsp; var s = setInterval("sc()", 500); <br>&nbsp; &nbsp;&nbsp;<span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">if ("WebSocket" in window) {&nbsp;</span><br>&nbsp; &nbsp; &nbsp; &nbsp; debug("Browser supports web sockets!", 'success'); <br>&nbsp; &nbsp; &nbsp; &nbsp; connect($('#host').val()); <br>&nbsp; &nbsp; &nbsp; &nbsp; $('#console_send').removeAttr('disabled'); <br>&nbsp; &nbsp; } else { <br>&nbsp; &nbsp; &nbsp; &nbsp; debug("Browser does not support web sockets", 'error'); <br>&nbsp; &nbsp; }; <br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">// function to send data on the web socket&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&nbsp; &nbsp; function ws_send(str) {&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&nbsp; &nbsp; &nbsp; &nbsp; try {&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ws.send(str);&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&nbsp; &nbsp; &nbsp; &nbsp; } catch (err) {&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; debug(err, 'error');&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;</span><br>&nbsp; &nbsp; } <br><span style="background-color: rgb(255, 255, 255); font-size: inherit; line-height: 1.5;">// connect to the specified host&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">function connect(host) {&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255);">&nbsp; &nbsp;&nbsp;</span><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">debug("Connecting to " + host + " ...");&nbsp;</span><br>&nbsp; &nbsp; try { <br><span style="font-size: inherit; background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">ws = new WebSocket(host); // create the web socket&nbsp;</span><br>&nbsp; &nbsp; } catch (err) { <br><span style="font-size: inherit; background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">debug(err, 'error');&nbsp;</span><br>&nbsp; &nbsp; } <br>&nbsp; $('#host_connect').attr('disabled', true); // disable the 'reconnect' button <br>&nbsp; ws.onopen = function () { <br>&nbsp; debug("connected... ", 'success'); // we are in! :D <br>}; <br>ws.onmessage = function (evt) { <br>debug(evt.data, 'response'); // we got some data - show it omg!! <br>}; <br>ws.onclose = function () { <br><span style="font-size: inherit; background-color: rgb(255, 255, 255);">&nbsp; &nbsp;</span><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">debug("Socket closed!", 'error'); // the socket was closed (this could be an error or simply that there is no server)&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255);">&nbsp; &nbsp;</span><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">$('#host_connect').attr('disabled', false); // re-enable the 'reconnect button&nbsp;</span><br>}; <br>}; <br><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">// function to display stuff, the second parameter is the class of the &lt;p&gt; (used for styling)&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">function debug(msg, type) {&nbsp;</span><br>&nbsp; &nbsp; $("#console").append('&lt;p class="' + (type || '') + '"&gt;' + msg + '&lt;/p&gt;'); <br>}; <br><br>// the user clicked to 'reconnect' button <br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">$('#host_connect').click(function () {&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&nbsp; &nbsp; debug("\n");&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&nbsp; &nbsp; connect($('#host').val());&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">});&nbsp;</span><br><span style="background-color: rgb(255, 255, 255); font-size: inherit; line-height: 1.5;">// the user clicked the send button&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">$('#console_send').click(function () {&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">var time = new Date().getTime();&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">var msg = $('#console_input').val() + time;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">ws_send(msg);&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">$('#console_input').val(' ');&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">});&nbsp;</span><br><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">$('#console_input').keyup(function (e) {&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">if(e.keyCode == 13){ // enter is pressed&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255);">&nbsp; &nbsp;&nbsp;</span><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">ws_send($('#console_input').val());&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255);">&nbsp; &nbsp;</span><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">$('#console_input').val(' ');&nbsp;</span><br>} <br>}); <br>}); <br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;/script&gt;&nbsp;</span><br><br>&lt;style type="text/css"&gt; <br>.error {color: red;} <br>.success {color: green;} <br>#console_wrapper {background-color: black; color:white;padding:5px;} <br>#console p {padding:0;margin:0;} <br>&lt;/style&gt; <br>&lt;/head&gt;<br>&lt;body&gt; <br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;h1&gt;Xmeet Demo&lt;/h1&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;div id="server_wrapper" &gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;p&gt;Server&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;input type="text" name="host" id="host" value="ws://meet.xpro.im:8080/xgate/websocket/xnestname" /&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;input type="submit" name="host_connect" id="host_connect" value="重新连接" /&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;/p&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;/div&gt;&nbsp;</span><br><br>&lt;div id="console_wrapper" style="overflow:auto; height:600px; border: 1px solid #999;"&gt; <br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;pre id="console"&gt;&lt;/pre&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;/div&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;div&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;input type="text" name="console_input" id="console_input" value="" /&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;input type="submit" name="console_send" id="console_send" value="Send" /&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;/div&gt;&nbsp;</span><br><span style="background-color: rgb(255, 255, 255); font-size: inherit; line-height: 1.5;">&lt;/body&gt;&nbsp;</span><br><span style="font-size: inherit; background-color: rgb(255, 255, 255); line-height: 1.5;">&lt;/html&gt;</span></td> 
    </tr> 
   </tbody> 
  </table> 
  <font color="#222222" face="Consolas, Lucida Console, monospace" style="background-color:inherit;"><span style="background-color:inherit;font-size:12px;"><b style="background-color:inherit;"><br></b></span></font> 
 </div>
<a href="http://meet.xpro.im:8080/demo.html"> 运 行 一 下 </a>
